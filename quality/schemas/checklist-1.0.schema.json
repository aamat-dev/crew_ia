{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "quality/schemas/checklist-1.0.schema.json",
  "title": "QA Checklist v1.0",
  "type": "object",
  "required": ["id","version","node_type","reject_threshold","allow_na","criteria"],
  "properties": {
    "$schema": { "type": "string" },
    "id": { "type": "string", "pattern": "^qa\\.(write|research|build|review)\\.v1$" },
    "version": { "type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$" },
    "node_type": { "type": "string", "enum": ["write","research","build","review"] },
    "reject_threshold": { "type": "number", "minimum": 0, "maximum": 100 },
    "allow_na": { "type": "boolean" },
    "criteria": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id","label","weight","rubric"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z0-9_\\-]+$" },
          "label": { "type": "string", "minLength": 1 },
          "weight": { "type": "number", "exclusiveMinimum": 0, "maximum": 1 },
          "rubric": {
            "type": "object",
            "required": ["0","50","100"],
            "properties": {
              "0": { "type": "string" },
              "50": { "type": "string" },
              "100": { "type": "string" }
            },
            "additionalProperties": false
          },
          "expected": { "type": ["object","array","string","number","boolean","null"] }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
